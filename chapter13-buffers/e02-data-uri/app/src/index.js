"use strict";

const fs = require("fs");
const { promisify } = require("util");
const path = require("path");
const readFile = promisify(fs.readFile);
const writeFile = promisify(fs.writeFile);


(async () => {
  const mime = "image/png";
  const encoding = "base64";

  const data = await readFile(path.join(__dirname, "images", "bomb.png"));
  const dataUri = `data:${ mime };${ encoding },${ data.toString(encoding) }`;
  console.log(dataUri);
})();

(async () => {
  const dataUri = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAACACAMAAAD+kP3uAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGd27GMAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjE0qmfO2QAAAdJJREFUaEPt0suSwyAMRNHM/390xqguLka8JCBJTUVnQ4yl7iz8eB72uPCzqXwf5cd8tHxE/7Eof4u3lOuSpHnHeVSUl15S3grVejNRvuyj5Zku6BWWonzbR8szS2kW5ce8rDwFa7yayrPlGeUmsqDwairPlqd7WZOQC4+CK8FVU5RP9YKk4cKj4Epw1WQqn4Uk0gSupqJ8yBIoreBq6lj5TCsjyof+TXk5q/eqZ84hvTRSzuq96plzSC+NlLN6r3rmHNJLI+Ws3queOStpsIeRyuhdVs5EeSUN9TBSGb3Lyplj5a372WyUV9JADyN/tO5ns8fKV0R5hZ4mRrZVQeSbsNI1m4nym6QasdI1m7lfStoiItyiPMqXEOH25eVkbJE0pyjfJmlOUb5N0pw+W77q58LPG5lmrPlFeYlMM9bOINOMtTPINGPtDDLNWDuDTDPW1uiPjkwz1tZEeUamGWtrojwj04y1NVGekWnG2prvLdfINGPtDDLNWDuDTDPWziDTjDU//bElZJqx5hflJTLNZIHdLZLmFOXbJM3JXd760BJJc4pys+PlCRlLiHCL8ihfQoRblN/IM2FlWZTfyDVhZVk3gPwmRrZFeYWeJkY2PZ+/N0vqmvoBHgcAAAAASUVORK5CYII=";
  const dataUriComponents = dataUri.split(",");
  const base64Data = dataUriComponents[1];

  const buf = new Buffer(base64Data, "base64");
  writeFile(path.join(__dirname, "images", "bomb-from-uri.png"), buf);
})();
